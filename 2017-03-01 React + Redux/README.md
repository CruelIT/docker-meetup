# React + Redux

## Введение

Тут описаны принципы, без понимания которых работа с современным фронтендом бессмыслена: http://www.live-notes.ru/coding/frontend-on-fingers-introduction/

Для начала нужно понимять концепцию реакта: всё вертится вокруг компонентов и их жизненного цикла. (минут ~15 объяснений)

Чтобы наглядно показать, как "въехать" в реакт, я подготовил [демо-приложение](https://github.com/CruelIT/react-redux-todo-list-app). Но его ценность не в нём самом, а в **дереве коммитов**. Очень прошу обратить на него внимание.

Ветки отражают этапы разработки:

* `0-init` — приготовления, выбор инструментов, настройка транспиляции.
* `1-dev` — выбор и настройка инструментов необходимых для удобства разработки.
* `2-prototype` — непосредственно разработка прототипа, базовая структура проекта, различия между "компонентом" и "контейнером".
* `3-redux` — что такое store, какие пакеты нужны для работы с redux, как интегрировать redux в готовый проект, перемещаемся от локального стейта в контейнерах к redux store.

## Что нужно, чтобы начать проект на React?

На этот вопрос отвечает ветка [0-init](https://github.com/CruelIT/react-redux-todo-list-app/tree/0-init).

Cм. [package.json](https://github.com/CruelIT/react-redux-todo-list-app/blob/0-init/package.json) для того, чтобы узнать какие пакеты нужны для начала.
Cм. [webpack.config.js](https://github.com/CruelIT/react-redux-todo-list-app/blob/0-init/webpack.config.js) для того, чтобы узнать как скофигурировать простейшую сборку проекта на React.
Не забудь про настройки транспилятора. Они хранятся в [.babelrc](https://github.com/CruelIT/react-redux-todo-list-app/blob/0-init/.babelrc).

Ну и конечно обрати внимание на пакет `react-dom`, с помощью которого (и только него) можно отрендерить реактовские компоненты на странице. (См. [src/js/index.js](https://github.com/CruelIT/react-redux-todo-list-app/blob/0-init/src/js/index.js))

## "Из коробки" работать неудобно

Для решения этой проблемы сообществом разработано много инструментов и технологий. Основные из них:

* [webpack-dev-server](https://github.com/webpack/webpack-dev-server) — будучи запущенным, является обычным веб-сервером, раздающим статические файлы полученные в результате сборки вебпаком. Руководствуясь конфигом (тут который [webpack.config.js](https://github.com/CruelIT/react-redux-todo-list-app/blob/1-dev/webpack.config.js)), следит за изменениями в исходниках, сам производит сборку после каждого изменения, и перезагружает страницу (если нет HMR).
* HMR — технология зашитая в вебпак. Позволяет при изменениях исходников не перезагружать всю страницу, а подменить кусочек на ней. Требует описания правил замены.
* [react-hot-loader](https://github.com/gaearon/react-hot-loader) — что-то вроде "плагина" для webpack. Посути является набором тех самых правил (о которых я говорил пунктов выше) замены отдельных кусочков.
* http://editorconfig.org/ — особо к реакту не относится, но используется во многих проектах. Суть: в ваш репозиторий вы кладёте файл [.editorconfig](https://github.com/CruelIT/react-redux-todo-list-app/blob/master/.editorconfig), в котором содержится набор правил, в соответствии с которым должен быть отформатирован ваш код. Когда ваш проект открывается в каком-нибудь редакторе, то редактор подцепляет эти правила и "помогает" вам писать код соответсвующий этим правилам. Ну это конечно если редактор поддерживает это дело.
* [ESLint](http://eslint.org/) — инструмент позволяющий проверять ваш код на соответствие определённым правилам. Для чистоты кода. Так же есть инструменты для интеграции в процесс сборки.

И главное: не забыть установить чёткую границу между дев-окружением и продакшеном. В продакшене никаких следов от дев-окружения остаться не должно. См. [коммит 00c4d12](https://github.com/CruelIT/react-redux-todo-list-app/commit/00c4d124a0fd04a53b238383bd8c5a745d64c324).

## Приступаем к разработке

См. [коммиты](https://github.com/CruelIT/react-redux-todo-list-app/commits/2-prototype) в [ветку 2-prototype](https://github.com/CruelIT/react-redux-todo-list-app/tree/2-prototype).

В ходе разработки делаем акцент на разнице между контейнером и компонетом. Говорим о жизненом цикле компонентов (https://facebook.github.io/react/docs/react-component.html) и что может вызвать перерисовку/render компонента.

Язык сильно отличается от традиционного JS. Потому что это es6 + фишки реакта + некоторые штуки ещё не утверждённые в стандарте (да, это норма для реакт-экосистемы).

## Переходим к редаксу

Почему? Зачем? Для чего?

Основные принципы.

См. доку к редаксу. Особенно [Introduction](http://redux.js.org/docs/introduction/).

См. [ветку 3-redux](https://github.com/CruelIT/react-redux-todo-list-app/tree/3-redux) и коммиты в ней.

## О чём не рассказал

* Ассинхронность в redux (redux-saga, redux-thunk)
* fiber
* reselect
* normalizer
* роутинг
* immutableJS
* работа с html-формами
* Lifecycle компонентов (https://facebook.github.io/react/docs/react-component.html)

## Запись

https://cloud.mail.ru/public/MwZR/myfKPbjZV
